<!DOCTYPE html>
<html>
  <head>
    <title>Event Register Test</title>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="parallel.js"></script>
  </head>
  <body>
    <button onclick="javascript:alert('Hola!')">Update</button>
    <button onclick="javascript:document.querySelector('#actions').innerHTML=''">Clear</button>

    <ul id="actions">
    </ul> 

    <script>

      // var myDataRef = new Firebase('https://gc6mc1516gx.firebaseio-demo.com/');
      // $('#messageInput').keypress(function (e) {
      //   if (e.keyCode == 13) {
      //     var name = $('#nameInput').val();
      //     var text = $('#messageInput').val();
      //     myDataRef.push({name: name, text: text});
      //     $('#messageInput').val('');
      //   }
      // });
      // myDataRef.on('child_added', function(snapshot) {
      //   var message = snapshot.val();
      //   displayChatMessage(message.name, message.text);
      // });
      // function displayChatMessage(name, text) {
      //   $('<div/>').text(text).prepend($('<em/>').text(name+': ')).appendTo($('#messagesDiv'));
      //   $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
      // };
      var config = {
        "firebase": "paralleljs-test",
        "session": "test"
      };
      var parallel = Parallel.init(config);
      Parallel.chain(function(evt) {
        parallel.session.push({
          type: evt.type,
          target: Parallel.selector(evt.target)
        });
      });
      parallel.session.on('child_added', function(fEvt, fPrev) {
        var target = fEvt.child('target').val(),
            type = fEvt.child('type').val();
        Parallel.trigger(target, type);
      });

    </script>
  </body>	
</html>